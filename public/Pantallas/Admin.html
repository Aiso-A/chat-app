<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>AdministraciÃ³n de Tareas | ByteTalk</title>
        <link rel="stylesheet" href="/Sidebar.css">
        <link rel="stylesheet" href="/Admin.css">
        <link href="https://fonts.googleapis.com/css2?family=Saira+Stencil+One&family=Exo+2:wght@400;700&display=swap" rel="stylesheet">
    </head>
    
      
<body>
     <!-- MenÃº lateral -->
     <nav class="sidebar d-flex flex-column p-3">
        <h2 class="app-title text-center">ByteTalk</h2>
        <ul class="nav flex-column">
            <li class="nav-item"><a href="/Pantallas/Chats.html" class="nav-link">Volver a Chats</a></li>
            <li class="nav-item"><a href="/Pantallas/Perfil.html" class="nav-link">Perfil</a></li>
            <li class="nav-item"><a href="/Pantallas/Admin.html" class="nav-link">Tareas</a></li>
            <li class="nav-item"><a href="/Pantallas/LogIn.html" class="nav-link">Cerrar sesiÃ³n</a></li>
        </ul>
    </nav>
    
    <div class="main-content">
        <header>
            <h1 class="section-title">AdministraciÃ³n de Tareas</h1>
            <button id="btnNuevaTarea">âž• Nueva Tarea</button>
        </header>
        
        <section>
            <h2 class="sub-title">Tareas Pendientes</h2>
            <ul id="tareasPendientes" class="task-list">
                <li class="task-item">ðŸ“Œ <strong>Revisar informes</strong> <span class="task-date">21/02/2025</span></li>
                <li class="task-item">ðŸ“Œ <strong>Avance de proyecto</strong> <span class="task-date">22/02/2025</span></li>
                <li class="task-item">ðŸ“Œ <strong>Propuesta POI</strong> <span class="task-date">23/02/2025</span></li>
            </ul>
        </section>
        
        <section>
            <h2 class="sub-title">Tareas Completadas</h2>
            <ul id="tareasCompletadas" class="task-list">
                <li class="task-item completed">âœ… <strong>Informe base de datos</strong> <span class="task-date">Completado</span></li>
                <li class="task-item completed">âœ… <strong>Configurar servidor</strong> <span class="task-date">Completado</span></li>
            </ul>
        </section>
    </div>

    <!-- Modal para nueva tarea -->
    <div id="modalTarea" class="modal">
        <div class="modal-content">
            <h4>Agregar Nueva Tarea</h4>
            <label for="tituloTarea">TÃ­tulo:</label>
            <input type="text" id="tituloTarea">
            <label for="descTarea">DescripciÃ³n:</label>
            <input type="text" id="descTarea">
            <label for="idGrupoT">Grupo:</label>
            <input type="number" id="idGrupoT">
            <label for="punTarea">TÃ­tulo:</label>
            <input type="number" id="punTarea">
            <label for="fechaLimite">Fecha LÃ­mite:</label>
            <input type="date" id="fechaLimite">
            <div class="modal-buttons">
                <button id="guardarTarea">Guardar</button>
                <button id="cerrarModal">Cerrar</button>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('btnNuevaTarea').addEventListener('click', function() {
            document.getElementById('modalTarea').style.display = 'block';
        });

        document.getElementById('cerrarModal').addEventListener('click', function() {
            document.getElementById('modalTarea').style.display = 'none';
        });

        document.getElementById('guardarTarea').addEventListener('click', function() {
            
            const nuevaTarea = {
            titulo: document.getElementById('tituloTarea').value,
            descripcion: document.getElementById('descTarea').value || null,
            fecha_entrega: document.getElementById('fechaLimite').value,
            grupoID: parseInt(document.getElementById('idGrupoT').value) || null,
            puntos: parseInt(document.getElementById('punTarea').value) || null
            };

            fetch('/api/Tareas/crear-tarea', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(nuevaTarea)
            })
                .then(res => res.json())
                .then(data => {
                alert('Tarea creada con Ã©xito');
                console.log(data);
                })
                .catch(err => {
                alert('Error al crear la tarea');
                console.error(err);
                });
        });
    </script>
</body>
</html>
