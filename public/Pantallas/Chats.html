<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ByteTalk - Chats</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Exo+2:wght@800&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Saira+Stencil+One&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="/Chats.css"/>
  <link rel="stylesheet" href="/Sidebar.css"/>
</head>
<body>
  <!-- Sidebar -->
  <nav class="sidebar">
    <h2 class="app-title">ByteTalk</h2>
    <ul>
      <li><a href="#" data-bs-toggle="modal" data-bs-target="#nuevoChatModal">Nuevo chat</a></li>
      <li><a href="#" data-bs-toggle="modal" data-bs-target="#nuevoGrupoModal">Nuevo grupo</a></li>
      <li><a href="/Pantallas/Perfil.html">Perfil</a></li>
      <li><a href="/Pantallas/Admin.html">Tareas</a></li>
      <li><a href="/Pantallas/LogIn.html">Cerrar sesión</a></li>
    </ul>
  </nav>

  <!-- Contenido principal -->
  <div class="main-content">
    <h3 class="section-title">Lista de Chats</h3>

    <!-- Chats individuales -->
    <h4 class="sub-title">Chats Individuales</h4>
    <div class="chat-list">
      <div class="chat-item" onclick="irAChat('amanda123', 'individual')">
        <div class="avatar"></div>
        <div class="chat-info">
          <h5>Amanda Flores</h5>
          <p>Último mensaje recibido...</p>
        </div>
      </div>
      <div class="chat-item" onclick="irAChat('ricardo456', 'individual')">
        <div class="avatar"></div>
        <div class="chat-info">
          <h5>Ricardo Hernández</h5>
          <p>Último mensaje...</p>
        </div>
      </div>
    </div>

    <!-- Chats grupales -->
    <h4 class="sub-title">Chats Grupales</h4>
    <div class="chat-list">
      <div class="chat-item" onclick="irAChat('equipo2', 'grupal')">
        <div class="avatar"></div>
        <div class="chat-info">
          <h5>POI Equipo2</h5>
          <p>Última conversación del grupo...</p>
        </div>
      </div>
      <div class="chat-item" onclick="irAChat('clubprogra', 'grupal')">
        <div class="avatar"></div>
        <div class="chat-info">
          <h5>Club de Progra</h5>
          <p>Último mensaje del grupo...</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Nuevo Chat -->
  <div class="modal fade" id="nuevoChatModal" tabindex="-1" aria-labelledby="nuevoChatLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" id="nuevoChatLabel">Selecciona un usuario</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <ul>
            <li><a href="#" onclick="crearChat('maria789')">Maria Carrillo</a></li>
            <li><a href="#" onclick="crearChat('kevin987')">Kevin Torres</a></li>
            <li><a href="#" onclick="crearChat('manuel654')">Manuel Zul</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Nuevo Grupo -->
  <div class="modal fade" id="nuevoGrupoModal" tabindex="-1" aria-labelledby="nuevoGrupoLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" id="nuevoGrupoLabel">Selecciona usuarios para el grupo</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="formGrupo">
            <div class="form-check">
              <input type="checkbox" class="form-check-input" name="grupo" value="jose">
              <label class="form-check-label">José Alvaro</label>
            </div>
            <div class="form-check">
              <input type="checkbox" class="form-check-input" name="grupo" value="lily">
              <label class="form-check-label">Lily Medina</label>
            </div>
            <div class="form-check">
              <input type="checkbox" class="form-check-input" name="grupo" value="andrea">
              <label class="form-check-label">Andrea García</label>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" onclick="crearGrupo()">Crear Grupo</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    function irAChat(id, tipo) {
      window.location.href = `Chat.html?id=${id}&tipo=${tipo}`;
    }

    function crearChat(id) {
      alert("Chat con " + id + " creado.");
      window.location.href = `Chat.html?id=${id}&tipo=individual`;
    }

    function crearGrupo() {
      let seleccionados = [];
      document.querySelectorAll('input[name="grupo"]:checked').forEach(cb => {
        seleccionados.push(cb.value);
      });

      if (seleccionados.length >= 2) {
        alert("Grupo creado con: " + seleccionados.join(", "));
        // Simulamos redirección a un nuevo grupo
        window.location.href = `Chat.html?id=grupo_${Date.now()}&tipo=grupal`;
      } else {
        alert("Debes seleccionar al menos 2 miembros para un grupo.");
      }
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
